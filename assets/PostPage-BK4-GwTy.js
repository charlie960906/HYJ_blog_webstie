import{c as y,a as j,r as i,j as e,b,L as d,C as N,e as v,h as P,i as S}from"./index-B9o2679I.js";import{A as h}from"./arrow-left-v42BUa6h.js";import{T as k}from"./tag-B8djoKhK.js";import{C}from"./calendar-C_Vu3Ex7.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),H=()=>{const{slug:n}=j(),[a,p]=i.useState(null),[u,c]=i.useState(!0),[m,o]=i.useState(null);i.useEffect(()=>((async()=>{if(!n){o("文章 ID 不存在"),c(!1);return}try{c(!0);const t=await v(n);if(!t){o("文章未找到");return}p(t),P(t.title,window.location.href),S(n,t.title),document.title=`${t.title} - HYJ's Blog`;const x={"@context":"https://schema.org","@type":"BlogPosting",headline:t.title,datePublished:t.date,author:{"@type":"Person",name:"HYJ"},publisher:{"@type":"Organization",name:"HYJ's Blog"},description:t.summary,keywords:t.tags.join(", ")},l=document.querySelector('script[type="application/ld+json"]');l&&document.head.removeChild(l);const r=document.createElement("script");r.type="application/ld+json",r.textContent=JSON.stringify(x),document.head.appendChild(r)}catch(t){o(t instanceof Error?t.message:"載入文章時發生錯誤")}finally{c(!1)}})(),()=>{document.title="HYJ's Blog";const t=document.querySelector('script[type="application/ld+json"]');t&&document.head.removeChild(t)}),[n]);const f=async()=>{if(a)if(navigator.share)try{await navigator.share({title:a.title,text:a.summary,url:window.location.href})}catch{await navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼板")}else try{await navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼板")}catch(s){console.error("無法複製連結:",s)}},w=s=>new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}),g=s=>{const l=s.replace(/<[^>]*>/g,"").split(/\s+/).filter(r=>r.length>0).length;return Math.ceil(l/200)};return u?e.jsx(b,{}):m?e.jsx("div",{className:"min-h-screen flex items-center justify-center pt-20 px-4",children:e.jsxs("div",{className:"glassmorphism-card p-6 sm:p-8 text-center max-w-md mx-auto",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"文章未找到"}),e.jsx("p",{className:"text-white/80 mb-6 text-sm sm:text-base",children:m}),e.jsxs(d,{to:"/",className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors text-sm sm:text-base",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"返回首頁"]})]})}):a?e.jsx("div",{className:"min-h-screen pt-20 sm:pt-24 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs(d,{to:"/",className:"inline-flex items-center text-white/80 hover:text-white transition-colors mb-8 sm:mb-10 text-sm sm:text-base",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"返回首頁"]}),e.jsxs("header",{className:"glassmorphism-card p-6 sm:p-8 mb-6 sm:mb-8",children:[e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-4",children:a.tags.map(s=>e.jsxs("span",{className:"inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-100 border border-blue-400/30",children:[e.jsx(k,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 mr-1"}),s]},s))}),e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 sm:mb-6 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0 text-sm text-white/70",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),e.jsx("span",{className:"text-xs sm:text-sm",children:w(a.date)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),e.jsxs("span",{className:"text-xs sm:text-sm",children:[g(a.content)," 分鐘閱讀"]})]})]}),e.jsxs("button",{onClick:f,className:"flex items-center px-3 py-2 text-white/80 hover:text-white transition-colors text-sm sm:text-base self-start sm:self-auto",children:[e.jsx(L,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"分享"]})]})]}),e.jsx("article",{className:"glassmorphism-card p-6 sm:p-8 mb-6 sm:mb-8",children:e.jsx("div",{className:"prose prose-invert prose-sm sm:prose-lg max-w-none",dangerouslySetInnerHTML:{__html:a.content}})})]})}):null};export{H as default};
