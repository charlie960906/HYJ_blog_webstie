const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RelatedPosts-DgglA40W.js","assets/index-BhL6l6JE.js","assets/index-DTefZDA_.css"])))=>i.map(i=>d[i]);
import{c as N,r as t,_ as R,j as e,L as f,C,u as S,a as L,b as _,g as E,d as M,f as z,t as D}from"./index-BhL6l6JE.js";import{T as v}from"./tag-DeUUD-Og.js";import{C as A}from"./calendar-CNRHOsAt.js";import{g as B}from"./tags-BJpqBYFS.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=N("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=N("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),I=t.lazy(()=>R(()=>import("./RelatedPosts-DgglA40W.js"),__vite__mapDeps([0,1,2]))),$=({post:s,isLazy:h=!1})=>{const d=()=>{typeof gtag<"u"&&gtag("event","click",{event_category:"engagement",event_label:"read_more",value:s.slug})},m=n=>new Date(n).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}),x=n=>{const r=n.split(" ").length;return Math.ceil(r/200)};return e.jsx("article",{className:"glassmorphism-card p-6 hover:scale-105 transition-all duration-300 group",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map(n=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-100 border border-blue-400/30",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),n]},n))}),e.jsx("h2",{className:"text-2xl font-bold text-white group-hover:text-blue-300 transition-colors duration-200",children:e.jsx(f,{to:`/post/${s.slug}`,children:s.title})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),m(s.date)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),x(s.content)," 分鐘閱讀"]})]}),e.jsx("p",{className:"text-white/80 line-clamp-3 leading-relaxed",children:s.summary}),e.jsx("div",{className:"flex justify-between items-center pt-4",children:e.jsxs(f,{to:`/post/${s.slug}`,onClick:d,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full hover:from-blue-600 hover:to-purple-600 transition-all duration-200 group/btn",children:["閱讀更多",e.jsx(F,{className:"w-4 h-4 ml-2 group-hover/btn:translate-x-1 transition-transform"})]})}),h&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"animate-pulse bg-white/10 h-24 rounded-lg"}),children:e.jsx(I,{currentPost:s})})]})})},U=()=>{const[s,h]=t.useState([]),[d,m]=t.useState(!0),[x,n]=t.useState(null);return t.useEffect(()=>{(async()=>{try{m(!0);const r=await B(),g=["bg-red-500/20 text-red-100 border-red-400/30","bg-cyan-500/20 text-cyan-100 border-cyan-400/30","bg-blue-500/20 text-blue-100 border-blue-400/30","bg-green-500/20 text-green-100 border-green-400/30","bg-yellow-500/20 text-yellow-100 border-yellow-400/30","bg-purple-500/20 text-purple-100 border-purple-400/30","bg-teal-500/20 text-teal-100 border-teal-400/30","bg-indigo-500/20 text-indigo-100 border-indigo-400/30","bg-pink-500/20 text-pink-100 border-pink-400/30","bg-sky-500/20 text-sky-100 border-sky-400/30","bg-emerald-500/20 text-emerald-100 border-emerald-400/30","bg-orange-500/20 text-orange-100 border-orange-400/30","bg-lime-500/20 text-lime-100 border-lime-400/30","bg-violet-500/20 text-violet-100 border-violet-400/30","bg-rose-500/20 text-rose-100 border-rose-400/30","bg-gray-500/20 text-gray-100 border-gray-400/30","bg-blue-600/20 text-blue-100 border-blue-500/30","bg-green-600/20 text-green-100 border-green-500/30","bg-purple-600/20 text-purple-100 border-purple-500/30","bg-teal-600/20 text-teal-100 border-teal-500/30"],p=r.filter(o=>o.name&&typeof o.count=="number"&&typeof o.size=="number").map((o,a)=>({...o,color:g[a%g.length]})).sort((o,a)=>a.count-o.count||o.name.localeCompare(a.name));h(p)}catch(r){n("載入標籤失敗，請稍後再試"),console.error("Failed to load tags:",r)}finally{m(!1)}})()},[]),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("div",{className:"glassmorphism-card p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(H,{className:"w-5 h-5 text-blue-400 mr-2"}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"關於我"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-2xl mx-auto",children:"老黃"}),e.jsx("p",{className:"text-white/80 text-sm text-center leading-relaxed",children:"目前主要興趣在於演算法、人工智慧、財經投資等～"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(f,{to:"/about",className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:"了解更多 →"})})]})]}),e.jsxs("div",{className:"glassmorphism-card p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(v,{className:"w-5 h-5 text-blue-400 mr-2"}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"標籤雲"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d?e.jsx("p",{className:"text-gray-400",children:"載入中..."}):x?e.jsx("p",{className:"text-red-400",children:x}):s.length>0?s.slice(0,12).map(i=>e.jsxs(f,{to:`/?tag=${encodeURIComponent(i.name)}`,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border transition-all duration-200 hover:scale-105 ${i.color||"bg-gray-500/20 text-gray-100 border-gray-400/30"}`,children:[i.name," (",i.count,")"]},i.name)):e.jsx("p",{className:"text-gray-400",children:"暫無標籤"})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(f,{to:"/tags",className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:"查看所有標籤 →"})})]})]})},V=()=>{const[s,h]=t.useState([]),[d,m]=t.useState([]),[x,n]=t.useState(!0),[i]=S(),{category:r}=L(),g=t.useRef(null),p=t.useRef(null),o=t.useRef(null),a=i.get("search"),b=i.get("tag");if(t.useEffect(()=>{(async()=>{try{n(!0);let l;r?l=await E(r):l=await M(),h(l);const y=z(l,{search:a,tag:b});m(y),a&&D(a,y.length)}catch(l){console.error("載入文章失敗:",l)}finally{n(!1)}})()},[a,b,r]),t.useEffect(()=>{let c;const l=()=>{clearTimeout(c),c=setTimeout(()=>{if(!g.current||!p.current||!o.current)return;const y=p.current,P=o.current,u=g.current,k=y.getBoundingClientRect().bottom,T=P.getBoundingClientRect().top,j=window.innerHeight;k<=j&&T>j?(u.style.position="absolute",u.style.bottom="0",u.style.top="auto"):(u.style.position="sticky",u.style.top="5rem",u.style.bottom="auto")},50)};return window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l),clearTimeout(c)}},[]),x)return e.jsx(_,{});const w=c=>({information:"資訊文章",reviews:"評測",finance:"財經",travel:"旅行",life:"生活"})[c]||c;return e.jsx("div",{className:"container mx-auto px-4 py-8",style:{paddingTop:r?"6rem":"2rem"},children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"order-1 lg:order-none lg:col-span-2 main-content",ref:p,children:[r&&e.jsxs("div",{className:"glassmorphism-card p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:w(r)}),e.jsxs("p",{className:"text-white/80",children:["共 ",d.length," 篇文章"]})]}),a&&e.jsx("div",{className:"glassmorphism-card p-4 mb-8",children:e.jsxs("p",{className:"text-white/80",children:['搜尋 "',a,'" 的結果：',d.length," 篇文章"]})}),b&&e.jsx("div",{className:"glassmorphism-card p-4 mb-8",children:e.jsxs("p",{className:"text-white/80",children:['標籤 "',b,'" 的文章：',d.length," 篇"]})}),e.jsx("div",{className:"space-y-8",children:d.length===0?e.jsxs("div",{className:"glassmorphism-card p-8 text-center",children:[e.jsx("p",{className:"text-white/80 text-lg",children:"沒有找到相關文章"}),(a||b||r)&&e.jsx("p",{className:"text-white/60 text-sm mt-2",children:"嘗試調整搜尋條件或瀏覽所有文章"})]}):d.map((c,l)=>e.jsx($,{post:c,isLazy:l>2},c.slug))})]}),e.jsx("div",{className:"order-2 lg:order-none lg:col-span-1 sidebar-container",children:e.jsx("div",{className:"sidebar-content",ref:g,children:e.jsx(U,{})})})]})})};export{V as default};
