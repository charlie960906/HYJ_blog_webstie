import{c as y,a as j,r as l,j as e,b,L as x,C as N,e as v,h as P,i as S}from"./index-B7txaR_I.js";import{A as h}from"./arrow-left-DWOBh6Ls.js";import{T as k}from"./tag-D0NwLuXj.js";import{C}from"./calendar-C2LbGUTD.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),H=()=>{const{slug:n}=j(),[r,u]=l.useState(null),[p,c]=l.useState(!0),[m,o]=l.useState(null);l.useEffect(()=>((async()=>{if(!n){o("文章 ID 不存在"),c(!1);return}try{c(!0);const t=await v(n);if(!t){o("文章未找到");return}u(t),P(t.title,window.location.href),S(n,t.title),document.title=`${t.title} - HYJ's Blog`;const d={"@context":"https://schema.org","@type":"BlogPosting",headline:t.title,datePublished:t.date,author:{"@type":"Person",name:"HYJ"},publisher:{"@type":"Organization",name:"HYJ's Blog"},description:t.summary,keywords:t.tags.join(", ")},i=document.querySelector('script[type="application/ld+json"]');i&&document.head.removeChild(i);const a=document.createElement("script");a.type="application/ld+json",a.textContent=JSON.stringify(d),document.head.appendChild(a)}catch(t){o(t instanceof Error?t.message:"載入文章時發生錯誤")}finally{c(!1)}})(),()=>{document.title="HYJ's Blog";const t=document.querySelector('script[type="application/ld+json"]');t&&document.head.removeChild(t)}),[n]);const f=async()=>{if(r)if(navigator.share)try{await navigator.share({title:r.title,text:r.summary,url:window.location.href})}catch{await navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼板")}else try{await navigator.clipboard.writeText(window.location.href),alert("連結已複製到剪貼板")}catch(s){console.error("無法複製連結:",s)}},g=s=>new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"}),w=s=>{const i=s.replace(/<[^>]*>/g,"").split(/\s+/).filter(a=>a.length>0).length;return Math.ceil(i/200)};return p?e.jsx(b,{}):m?e.jsx("div",{className:"min-h-screen flex items-center justify-center pt-20",children:e.jsxs("div",{className:"glassmorphism-card p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"文章未找到"}),e.jsx("p",{className:"text-white/80 mb-6",children:m}),e.jsxs(x,{to:"/",className:"inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"返回首頁"]})]})}):r?e.jsx("div",{className:"min-h-screen pt-20 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs(x,{to:"/",className:"inline-flex items-center text-white/80 hover:text-white transition-colors mb-8",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"返回首頁"]}),e.jsxs("header",{className:"glassmorphism-card p-8 mb-8",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:r.tags.map(s=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-100 border border-blue-400/30",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),s]},s))}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6 leading-tight",children:r.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),g(r.date)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-4 h-4 mr-1"}),w(r.content)," 分鐘閱讀"]})]}),e.jsxs("button",{onClick:f,className:"flex items-center px-3 py-2 text-white/80 hover:text-white transition-colors",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),"分享"]})]})]}),e.jsx("article",{className:"glassmorphism-card p-8 mb-8",children:e.jsx("div",{className:"prose prose-invert prose-lg max-w-none",dangerouslySetInnerHTML:{__html:r.content}})})]})}):null};export{H as default};
